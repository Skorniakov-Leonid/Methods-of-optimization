Traceback (most recent call last):
  File "/Users/mike/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/jupyter_cache/executors/utils.py", line 58, in single_nb_execution
    executenb(
  File "/Users/mike/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/nbclient/client.py", line 1314, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
  File "/Users/mike/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/jupyter_core/utils/__init__.py", line 165, in wrapped
    return loop.run_until_complete(inner)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/asyncio/base_events.py", line 642, in run_until_complete
    return future.result()
  File "/Users/mike/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/nbclient/client.py", line 709, in async_execute
    await self.async_execute_cell(
  File "/Users/mike/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/nbclient/client.py", line 1062, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "/Users/mike/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/nbclient/client.py", line 918, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
 def example1(trial):
    x = trial.suggest_float("x", -100, 100)
    y = trial.suggest_float("y", -100, 100)
    return x**2 + y**2


add_study(example1, "Test 1") # OK
------------------


[0;31m---------------------------------------------------------------------------[0m
[0;31mIntegrityError[0m                            Traceback (most recent call last)
File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1971[0m, in [0;36mConnection._exec_single_context[0;34m(self, dialect, context, statement, parameters)[0m
[1;32m   1970[0m     [38;5;28;01mif[39;00m [38;5;129;01mnot[39;00m evt_handled:
[0;32m-> 1971[0m         [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mdialect[49m[38;5;241;43m.[39;49m[43mdo_execute[49m[43m([49m
[1;32m   1972[0m [43m            [49m[43mcursor[49m[43m,[49m[43m [49m[43mstr_statement[49m[43m,[49m[43m [49m[43meffective_parameters[49m[43m,[49m[43m [49m[43mcontext[49m
[1;32m   1973[0m [43m        [49m[43m)[49m
[1;32m   1975[0m [38;5;28;01mif[39;00m [38;5;28mself[39m[38;5;241m.[39m_has_events [38;5;129;01mor[39;00m [38;5;28mself[39m[38;5;241m.[39mengine[38;5;241m.[39m_has_events:

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py:919[0m, in [0;36mDefaultDialect.do_execute[0;34m(self, cursor, statement, parameters, context)[0m
[1;32m    918[0m [38;5;28;01mdef[39;00m [38;5;21mdo_execute[39m([38;5;28mself[39m, cursor, statement, parameters, context[38;5;241m=[39m[38;5;28;01mNone[39;00m):
[0;32m--> 919[0m     [43mcursor[49m[38;5;241;43m.[39;49m[43mexecute[49m[43m([49m[43mstatement[49m[43m,[49m[43m [49m[43mparameters[49m[43m)[49m

[0;31mIntegrityError[0m: UNIQUE constraint failed: studies.study_name

The above exception was the direct cause of the following exception:

[0;31mIntegrityError[0m                            Traceback (most recent call last)
File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/optuna/storages/_rdb/storage.py:273[0m, in [0;36mRDBStorage.create_new_study[0;34m(self, directions, study_name)[0m
[1;32m    268[0m         direction_models [38;5;241m=[39m [
[1;32m    269[0m             models[38;5;241m.[39mStudyDirectionModel(objective[38;5;241m=[39mobjective, direction[38;5;241m=[39md)
[1;32m    270[0m             [38;5;28;01mfor[39;00m objective, d [38;5;129;01min[39;00m [38;5;28menumerate[39m([38;5;28mlist[39m(directions))
[1;32m    271[0m         ]
[0;32m--> 273[0m         session[38;5;241m.[39madd(models[38;5;241m.[39mStudyModel(study_name[38;5;241m=[39mstudy_name, directions[38;5;241m=[39mdirection_models))
[1;32m    275[0m [38;5;28;01mexcept[39;00m sqlalchemy_exc[38;5;241m.[39mIntegrityError:

File [0;32m/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:124[0m, in [0;36m_GeneratorContextManager.__exit__[0;34m(self, type, value, traceback)[0m
[1;32m    123[0m [38;5;28;01mtry[39;00m:
[0;32m--> 124[0m     [38;5;28;43mnext[39;49m[43m([49m[38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mgen[49m[43m)[49m
[1;32m    125[0m [38;5;28;01mexcept[39;00m [38;5;167;01mStopIteration[39;00m:

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/optuna/storages/_rdb/storage.py:73[0m, in [0;36m_create_scoped_session[0;34m(scoped_session, ignore_integrity_error)[0m
[1;32m     72[0m     [38;5;28;01myield[39;00m session
[0;32m---> 73[0m     [43msession[49m[38;5;241;43m.[39;49m[43mcommit[49m[43m([49m[43m)[49m
[1;32m     74[0m [38;5;28;01mexcept[39;00m sqlalchemy_exc[38;5;241m.[39mIntegrityError [38;5;28;01mas[39;00m e:

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py:1972[0m, in [0;36mSession.commit[0;34m(self)[0m
[1;32m   1970[0m     trans [38;5;241m=[39m [38;5;28mself[39m[38;5;241m.[39m_autobegin_t()
[0;32m-> 1972[0m [43mtrans[49m[38;5;241;43m.[39;49m[43mcommit[49m[43m([49m[43m_to_root[49m[38;5;241;43m=[39;49m[38;5;28;43;01mTrue[39;49;00m[43m)[49m

File [0;32m<string>:2[0m, in [0;36mcommit[0;34m(self, _to_root)[0m

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py:139[0m, in [0;36m_StateChange.declare_states.<locals>._go[0;34m(fn, self, *arg, **kw)[0m
[1;32m    138[0m [38;5;28;01mtry[39;00m:
[0;32m--> 139[0m     ret_value [38;5;241m=[39m [43mfn[49m[43m([49m[38;5;28;43mself[39;49m[43m,[49m[43m [49m[38;5;241;43m*[39;49m[43marg[49m[43m,[49m[43m [49m[38;5;241;43m*[39;49m[38;5;241;43m*[39;49m[43mkw[49m[43m)[49m
[1;32m    140[0m [38;5;28;01mexcept[39;00m:

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py:1257[0m, in [0;36mSessionTransaction.commit[0;34m(self, _to_root)[0m
[1;32m   1256[0m     [38;5;28;01mwith[39;00m [38;5;28mself[39m[38;5;241m.[39m_expect_state(SessionTransactionState[38;5;241m.[39mPREPARED):
[0;32m-> 1257[0m         [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43m_prepare_impl[49m[43m([49m[43m)[49m
[1;32m   1259[0m [38;5;28;01mif[39;00m [38;5;28mself[39m[38;5;241m.[39m_parent [38;5;129;01mis[39;00m [38;5;28;01mNone[39;00m [38;5;129;01mor[39;00m [38;5;28mself[39m[38;5;241m.[39mnested:

File [0;32m<string>:2[0m, in [0;36m_prepare_impl[0;34m(self)[0m

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py:139[0m, in [0;36m_StateChange.declare_states.<locals>._go[0;34m(fn, self, *arg, **kw)[0m
[1;32m    138[0m [38;5;28;01mtry[39;00m:
[0;32m--> 139[0m     ret_value [38;5;241m=[39m [43mfn[49m[43m([49m[38;5;28;43mself[39;49m[43m,[49m[43m [49m[38;5;241;43m*[39;49m[43marg[49m[43m,[49m[43m [49m[38;5;241;43m*[39;49m[38;5;241;43m*[39;49m[43mkw[49m[43m)[49m
[1;32m    140[0m [38;5;28;01mexcept[39;00m:

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py:1232[0m, in [0;36mSessionTransaction._prepare_impl[0;34m(self)[0m
[1;32m   1231[0m         [38;5;28;01mbreak[39;00m
[0;32m-> 1232[0m     [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43msession[49m[38;5;241;43m.[39;49m[43mflush[49m[43m([49m[43m)[49m
[1;32m   1233[0m [38;5;28;01melse[39;00m:

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py:4296[0m, in [0;36mSession.flush[0;34m(self, objects)[0m
[1;32m   4295[0m     [38;5;28mself[39m[38;5;241m.[39m_flushing [38;5;241m=[39m [38;5;28;01mTrue[39;00m
[0;32m-> 4296[0m     [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43m_flush[49m[43m([49m[43mobjects[49m[43m)[49m
[1;32m   4297[0m [38;5;28;01mfinally[39;00m:

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py:4432[0m, in [0;36mSession._flush[0;34m(self, objects)[0m
[1;32m   4431[0m [38;5;28;01mwith[39;00m util[38;5;241m.[39msafe_reraise():
[0;32m-> 4432[0m     transaction[38;5;241m.[39mrollback(_capture_exception[38;5;241m=[39m[38;5;28;01mTrue[39;00m)

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py:146[0m, in [0;36msafe_reraise.__exit__[0;34m(self, type_, value, traceback)[0m
[1;32m    145[0m     [38;5;28mself[39m[38;5;241m.[39m_exc_info [38;5;241m=[39m [38;5;28;01mNone[39;00m  [38;5;66;03m# remove potential circular references[39;00m
[0;32m--> 146[0m     [38;5;28;01mraise[39;00m exc_value[38;5;241m.[39mwith_traceback(exc_tb)
[1;32m    147[0m [38;5;28;01melse[39;00m:

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py:4392[0m, in [0;36mSession._flush[0;34m(self, objects)[0m
[1;32m   4391[0m [38;5;28;01mtry[39;00m:
[0;32m-> 4392[0m     [43mflush_context[49m[38;5;241;43m.[39;49m[43mexecute[49m[43m([49m[43m)[49m
[1;32m   4393[0m [38;5;28;01mfinally[39;00m:

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py:466[0m, in [0;36mUOWTransaction.execute[0;34m(self)[0m
[1;32m    465[0m [38;5;28;01mfor[39;00m rec [38;5;129;01min[39;00m topological[38;5;241m.[39msort([38;5;28mself[39m[38;5;241m.[39mdependencies, postsort_actions):
[0;32m--> 466[0m     [43mrec[49m[38;5;241;43m.[39;49m[43mexecute[49m[43m([49m[38;5;28;43mself[39;49m[43m)[49m

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py:642[0m, in [0;36mSaveUpdateAll.execute[0;34m(self, uow)[0m
[1;32m    640[0m [38;5;129m@util[39m[38;5;241m.[39mpreload_module([38;5;124m"[39m[38;5;124msqlalchemy.orm.persistence[39m[38;5;124m"[39m)
[1;32m    641[0m [38;5;28;01mdef[39;00m [38;5;21mexecute[39m([38;5;28mself[39m, uow):
[0;32m--> 642[0m     [43mutil[49m[38;5;241;43m.[39;49m[43mpreloaded[49m[38;5;241;43m.[39;49m[43morm_persistence[49m[38;5;241;43m.[39;49m[43msave_obj[49m[43m([49m
[1;32m    643[0m [43m        [49m[38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mmapper[49m[43m,[49m
[1;32m    644[0m [43m        [49m[43muow[49m[38;5;241;43m.[39;49m[43mstates_for_mapper_hierarchy[49m[43m([49m[38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mmapper[49m[43m,[49m[43m [49m[38;5;28;43;01mFalse[39;49;00m[43m,[49m[43m [49m[38;5;28;43;01mFalse[39;49;00m[43m)[49m[43m,[49m
[1;32m    645[0m [43m        [49m[43muow[49m[43m,[49m
[1;32m    646[0m [43m    [49m[43m)[49m

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py:93[0m, in [0;36msave_obj[0;34m(base_mapper, states, uowtransaction, single)[0m
[1;32m     85[0m     _emit_update_statements(
[1;32m     86[0m         base_mapper,
[1;32m     87[0m         uowtransaction,
[0;32m   (...)[0m
[1;32m     90[0m         update,
[1;32m     91[0m     )
[0;32m---> 93[0m     [43m_emit_insert_statements[49m[43m([49m
[1;32m     94[0m [43m        [49m[43mbase_mapper[49m[43m,[49m
[1;32m     95[0m [43m        [49m[43muowtransaction[49m[43m,[49m
[1;32m     96[0m [43m        [49m[43mmapper[49m[43m,[49m
[1;32m     97[0m [43m        [49m[43mtable[49m[43m,[49m
[1;32m     98[0m [43m        [49m[43minsert[49m[43m,[49m
[1;32m     99[0m [43m    [49m[43m)[49m
[1;32m    101[0m _finalize_insert_update_commands(
[1;32m    102[0m     base_mapper,
[1;32m    103[0m     uowtransaction,
[0;32m   (...)[0m
[1;32m    119[0m     ),
[1;32m    120[0m )

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py:1233[0m, in [0;36m_emit_insert_statements[0;34m(base_mapper, uowtransaction, mapper, table, insert, bookkeeping, use_orm_insert_stmt, execution_options)[0m
[1;32m   1232[0m [38;5;28;01melse[39;00m:
[0;32m-> 1233[0m     result [38;5;241m=[39m [43mconnection[49m[38;5;241;43m.[39;49m[43mexecute[49m[43m([49m
[1;32m   1234[0m [43m        [49m[43mstatement[49m[43m,[49m
[1;32m   1235[0m [43m        [49m[43mparams[49m[43m,[49m
[1;32m   1236[0m [43m        [49m[43mexecution_options[49m[38;5;241;43m=[39;49m[43mexecution_options[49m[43m,[49m
[1;32m   1237[0m [43m    [49m[43m)[49m
[1;32m   1239[0m primary_key [38;5;241m=[39m result[38;5;241m.[39minserted_primary_key

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1422[0m, in [0;36mConnection.execute[0;34m(self, statement, parameters, execution_options)[0m
[1;32m   1421[0m [38;5;28;01melse[39;00m:
[0;32m-> 1422[0m     [38;5;28;01mreturn[39;00m [43mmeth[49m[43m([49m
[1;32m   1423[0m [43m        [49m[38;5;28;43mself[39;49m[43m,[49m
[1;32m   1424[0m [43m        [49m[43mdistilled_parameters[49m[43m,[49m
[1;32m   1425[0m [43m        [49m[43mexecution_options[49m[43m [49m[38;5;129;43;01mor[39;49;00m[43m [49m[43mNO_OPTIONS[49m[43m,[49m
[1;32m   1426[0m [43m    [49m[43m)[49m

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py:514[0m, in [0;36mClauseElement._execute_on_connection[0;34m(self, connection, distilled_params, execution_options)[0m
[1;32m    513[0m         [38;5;28;01massert[39;00m [38;5;28misinstance[39m([38;5;28mself[39m, Executable)
[0;32m--> 514[0m     [38;5;28;01mreturn[39;00m [43mconnection[49m[38;5;241;43m.[39;49m[43m_execute_clauseelement[49m[43m([49m
[1;32m    515[0m [43m        [49m[38;5;28;43mself[39;49m[43m,[49m[43m [49m[43mdistilled_params[49m[43m,[49m[43m [49m[43mexecution_options[49m
[1;32m    516[0m [43m    [49m[43m)[49m
[1;32m    517[0m [38;5;28;01melse[39;00m:

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1644[0m, in [0;36mConnection._execute_clauseelement[0;34m(self, elem, distilled_parameters, execution_options)[0m
[1;32m   1636[0m compiled_sql, extracted_params, cache_hit [38;5;241m=[39m elem[38;5;241m.[39m_compile_w_cache(
[1;32m   1637[0m     dialect[38;5;241m=[39mdialect,
[1;32m   1638[0m     compiled_cache[38;5;241m=[39mcompiled_cache,
[0;32m   (...)[0m
[1;32m   1642[0m     linting[38;5;241m=[39m[38;5;28mself[39m[38;5;241m.[39mdialect[38;5;241m.[39mcompiler_linting [38;5;241m|[39m compiler[38;5;241m.[39mWARN_LINTING,
[1;32m   1643[0m )
[0;32m-> 1644[0m ret [38;5;241m=[39m [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43m_execute_context[49m[43m([49m
[1;32m   1645[0m [43m    [49m[43mdialect[49m[43m,[49m
[1;32m   1646[0m [43m    [49m[43mdialect[49m[38;5;241;43m.[39;49m[43mexecution_ctx_cls[49m[38;5;241;43m.[39;49m[43m_init_compiled[49m[43m,[49m
[1;32m   1647[0m [43m    [49m[43mcompiled_sql[49m[43m,[49m
[1;32m   1648[0m [43m    [49m[43mdistilled_parameters[49m[43m,[49m
[1;32m   1649[0m [43m    [49m[43mexecution_options[49m[43m,[49m
[1;32m   1650[0m [43m    [49m[43mcompiled_sql[49m[43m,[49m
[1;32m   1651[0m [43m    [49m[43mdistilled_parameters[49m[43m,[49m
[1;32m   1652[0m [43m    [49m[43melem[49m[43m,[49m
[1;32m   1653[0m [43m    [49m[43mextracted_params[49m[43m,[49m
[1;32m   1654[0m [43m    [49m[43mcache_hit[49m[38;5;241;43m=[39;49m[43mcache_hit[49m[43m,[49m
[1;32m   1655[0m [43m[49m[43m)[49m
[1;32m   1656[0m [38;5;28;01mif[39;00m has_events:

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1850[0m, in [0;36mConnection._execute_context[0;34m(self, dialect, constructor, statement, parameters, execution_options, *args, **kw)[0m
[1;32m   1849[0m [38;5;28;01melse[39;00m:
[0;32m-> 1850[0m     [38;5;28;01mreturn[39;00m [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43m_exec_single_context[49m[43m([49m
[1;32m   1851[0m [43m        [49m[43mdialect[49m[43m,[49m[43m [49m[43mcontext[49m[43m,[49m[43m [49m[43mstatement[49m[43m,[49m[43m [49m[43mparameters[49m
[1;32m   1852[0m [43m    [49m[43m)[49m

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1990[0m, in [0;36mConnection._exec_single_context[0;34m(self, dialect, context, statement, parameters)[0m
[1;32m   1989[0m [38;5;28;01mexcept[39;00m [38;5;167;01mBaseException[39;00m [38;5;28;01mas[39;00m e:
[0;32m-> 1990[0m     [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43m_handle_dbapi_exception[49m[43m([49m
[1;32m   1991[0m [43m        [49m[43me[49m[43m,[49m[43m [49m[43mstr_statement[49m[43m,[49m[43m [49m[43meffective_parameters[49m[43m,[49m[43m [49m[43mcursor[49m[43m,[49m[43m [49m[43mcontext[49m
[1;32m   1992[0m [43m    [49m[43m)[49m
[1;32m   1994[0m [38;5;28;01mreturn[39;00m result

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py:2357[0m, in [0;36mConnection._handle_dbapi_exception[0;34m(self, e, statement, parameters, cursor, context, is_sub_exec)[0m
[1;32m   2356[0m     [38;5;28;01massert[39;00m sqlalchemy_exception [38;5;129;01mis[39;00m [38;5;129;01mnot[39;00m [38;5;28;01mNone[39;00m
[0;32m-> 2357[0m     [38;5;28;01mraise[39;00m sqlalchemy_exception[38;5;241m.[39mwith_traceback(exc_info[[38;5;241m2[39m]) [38;5;28;01mfrom[39;00m [38;5;21;01me[39;00m
[1;32m   2358[0m [38;5;28;01melse[39;00m:

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1971[0m, in [0;36mConnection._exec_single_context[0;34m(self, dialect, context, statement, parameters)[0m
[1;32m   1970[0m     [38;5;28;01mif[39;00m [38;5;129;01mnot[39;00m evt_handled:
[0;32m-> 1971[0m         [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mdialect[49m[38;5;241;43m.[39;49m[43mdo_execute[49m[43m([49m
[1;32m   1972[0m [43m            [49m[43mcursor[49m[43m,[49m[43m [49m[43mstr_statement[49m[43m,[49m[43m [49m[43meffective_parameters[49m[43m,[49m[43m [49m[43mcontext[49m
[1;32m   1973[0m [43m        [49m[43m)[49m
[1;32m   1975[0m [38;5;28;01mif[39;00m [38;5;28mself[39m[38;5;241m.[39m_has_events [38;5;129;01mor[39;00m [38;5;28mself[39m[38;5;241m.[39mengine[38;5;241m.[39m_has_events:

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py:919[0m, in [0;36mDefaultDialect.do_execute[0;34m(self, cursor, statement, parameters, context)[0m
[1;32m    918[0m [38;5;28;01mdef[39;00m [38;5;21mdo_execute[39m([38;5;28mself[39m, cursor, statement, parameters, context[38;5;241m=[39m[38;5;28;01mNone[39;00m):
[0;32m--> 919[0m     [43mcursor[49m[38;5;241;43m.[39;49m[43mexecute[49m[43m([49m[43mstatement[49m[43m,[49m[43m [49m[43mparameters[49m[43m)[49m

[0;31mIntegrityError[0m: (sqlite3.IntegrityError) UNIQUE constraint failed: studies.study_name
[SQL: INSERT INTO studies (study_name) VALUES (?)]
[parameters: ('Test 1',)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)

During handling of the above exception, another exception occurred:

[0;31mDuplicatedStudyError[0m                      Traceback (most recent call last)
Cell [0;32mIn[2], line 7[0m
[1;32m      3[0m    y [38;5;241m=[39m trial[38;5;241m.[39msuggest_float([38;5;124m"[39m[38;5;124my[39m[38;5;124m"[39m, [38;5;241m-[39m[38;5;241m100[39m, [38;5;241m100[39m)
[1;32m      4[0m    [38;5;28;01mreturn[39;00m x[38;5;241m*[39m[38;5;241m*[39m[38;5;241m2[39m [38;5;241m+[39m y[38;5;241m*[39m[38;5;241m*[39m[38;5;241m2[39m
[0;32m----> 7[0m [43madd_study[49m[43m([49m[43mexample1[49m[43m,[49m[43m [49m[38;5;124;43m"[39;49m[38;5;124;43mTest 1[39;49m[38;5;124;43m"[39;49m[43m)[49m [38;5;66;03m# OK[39;00m

Cell [0;32mIn[1], line 5[0m, in [0;36madd_study[0;34m(fn, name, sampler, n_trials)[0m
[1;32m      4[0m [38;5;28;01mdef[39;00m [38;5;21madd_study[39m(fn, name, sampler[38;5;241m=[39m[38;5;28;01mNone[39;00m, n_trials[38;5;241m=[39m[38;5;241m200[39m):
[0;32m----> 5[0m     study [38;5;241m=[39m [43moptuna[49m[38;5;241;43m.[39;49m[43mcreate_study[49m[43m([49m
[1;32m      6[0m [43m        [49m[43mdirection[49m[38;5;241;43m=[39;49m[38;5;124;43m"[39;49m[38;5;124;43mminimize[39;49m[38;5;124;43m"[39;49m[43m,[49m
[1;32m      7[0m [43m        [49m[43mstorage[49m[38;5;241;43m=[39;49m[38;5;124;43m"[39;49m[38;5;124;43msqlite:///db.sqlite3[39;49m[38;5;124;43m"[39;49m[43m,[49m
[1;32m      8[0m [43m        [49m[43mstudy_name[49m[38;5;241;43m=[39;49m[43mname[49m[43m,[49m
[1;32m      9[0m [43m        [49m[43msampler[49m[38;5;241;43m=[39;49m[43msampler[49m
[1;32m     10[0m [43m    [49m[43m)[49m
[1;32m     11[0m     study[38;5;241m.[39moptimize(fn, n_trials[38;5;241m=[39mn_trials, show_progress_bar[38;5;241m=[39m[38;5;28;01mTrue[39;00m)
[1;32m     12[0m     [38;5;28mprint[39m([38;5;124mf[39m[38;5;124m"[39m[38;5;124mBest value: [39m[38;5;132;01m{[39;00mstudy[38;5;241m.[39mbest_value[38;5;132;01m}[39;00m[38;5;124m (params: [39m[38;5;132;01m{[39;00mstudy[38;5;241m.[39mbest_params[38;5;132;01m}[39;00m[38;5;124m)[39m[38;5;124m"[39m)

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/optuna/_convert_positional_args.py:83[0m, in [0;36mconvert_positional_args.<locals>.converter_decorator.<locals>.converter_wrapper[0;34m(*args, **kwargs)[0m
[1;32m     77[0m     [38;5;28;01mraise[39;00m [38;5;167;01mTypeError[39;00m(
[1;32m     78[0m         [38;5;124mf[39m[38;5;124m"[39m[38;5;132;01m{[39;00mfunc[38;5;241m.[39m[38;5;18m__name__[39m[38;5;132;01m}[39;00m[38;5;124m() got multiple values for arguments [39m[38;5;132;01m{[39;00mduplicated_kwds[38;5;132;01m}[39;00m[38;5;124m.[39m[38;5;124m"[39m
[1;32m     79[0m     )
[1;32m     81[0m kwargs[38;5;241m.[39mupdate(inferred_kwargs)
[0;32m---> 83[0m [38;5;28;01mreturn[39;00m [43mfunc[49m[43m([49m[38;5;241;43m*[39;49m[38;5;241;43m*[39;49m[43mkwargs[49m[43m)[49m

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/optuna/study/study.py:1251[0m, in [0;36mcreate_study[0;34m(storage, sampler, pruner, study_name, direction, load_if_exists, directions)[0m
[1;32m   1249[0m storage [38;5;241m=[39m storages[38;5;241m.[39mget_storage(storage)
[1;32m   1250[0m [38;5;28;01mtry[39;00m:
[0;32m-> 1251[0m     study_id [38;5;241m=[39m [43mstorage[49m[38;5;241;43m.[39;49m[43mcreate_new_study[49m[43m([49m[43mdirection_objects[49m[43m,[49m[43m [49m[43mstudy_name[49m[43m)[49m
[1;32m   1252[0m [38;5;28;01mexcept[39;00m exceptions[38;5;241m.[39mDuplicatedStudyError:
[1;32m   1253[0m     [38;5;28;01mif[39;00m load_if_exists:

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/optuna/storages/_cached_storage.py:82[0m, in [0;36m_CachedStorage.create_new_study[0;34m(self, directions, study_name)[0m
[1;32m     79[0m [38;5;28;01mdef[39;00m [38;5;21mcreate_new_study[39m(
[1;32m     80[0m     [38;5;28mself[39m, directions: Sequence[StudyDirection], study_name: Optional[[38;5;28mstr[39m] [38;5;241m=[39m [38;5;28;01mNone[39;00m
[1;32m     81[0m ) [38;5;241m-[39m[38;5;241m>[39m [38;5;28mint[39m:
[0;32m---> 82[0m     study_id [38;5;241m=[39m [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43m_backend[49m[38;5;241;43m.[39;49m[43mcreate_new_study[49m[43m([49m[43mdirections[49m[38;5;241;43m=[39;49m[43mdirections[49m[43m,[49m[43m [49m[43mstudy_name[49m[38;5;241;43m=[39;49m[43mstudy_name[49m[43m)[49m
[1;32m     83[0m     [38;5;28;01mwith[39;00m [38;5;28mself[39m[38;5;241m.[39m_lock:
[1;32m     84[0m         study [38;5;241m=[39m _StudyInfo()

File [0;32m~/Documents/Methods-of-optimization/venv/lib/python3.9/site-packages/optuna/storages/_rdb/storage.py:276[0m, in [0;36mRDBStorage.create_new_study[0;34m(self, directions, study_name)[0m
[1;32m    273[0m         session[38;5;241m.[39madd(models[38;5;241m.[39mStudyModel(study_name[38;5;241m=[39mstudy_name, directions[38;5;241m=[39mdirection_models))
[1;32m    275[0m [38;5;28;01mexcept[39;00m sqlalchemy_exc[38;5;241m.[39mIntegrityError:
[0;32m--> 276[0m     [38;5;28;01mraise[39;00m optuna[38;5;241m.[39mexceptions[38;5;241m.[39mDuplicatedStudyError(
[1;32m    277[0m         [38;5;124m"[39m[38;5;124mAnother study with name [39m[38;5;124m'[39m[38;5;132;01m{}[39;00m[38;5;124m'[39m[38;5;124m already exists. [39m[38;5;124m"[39m
[1;32m    278[0m         [38;5;124m"[39m[38;5;124mPlease specify a different name, or reuse the existing one [39m[38;5;124m"[39m
[1;32m    279[0m         [38;5;124m"[39m[38;5;124mby setting `load_if_exists` (for Python API) or [39m[38;5;124m"[39m
[1;32m    280[0m         [38;5;124m"[39m[38;5;124m`--skip-if-exists` flag (for CLI).[39m[38;5;124m"[39m[38;5;241m.[39mformat(study_name)
[1;32m    281[0m     )
[1;32m    283[0m _logger[38;5;241m.[39minfo([38;5;124m"[39m[38;5;124mA new study created in RDB with name: [39m[38;5;132;01m{}[39;00m[38;5;124m"[39m[38;5;241m.[39mformat(study_name))
[1;32m    285[0m [38;5;28;01mreturn[39;00m [38;5;28mself[39m[38;5;241m.[39mget_study_id_from_name(study_name)

[0;31mDuplicatedStudyError[0m: Another study with name 'Test 1' already exists. Please specify a different name, or reuse the existing one by setting `load_if_exists` (for Python API) or `--skip-if-exists` flag (for CLI).

